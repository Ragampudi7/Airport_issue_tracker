<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h1>‚úàÔ∏è Airport Issue Tracker</h1>
      <p>{{ isLoginMode ? 'Welcome back!' : 'Create your account' }}</p>
    </div>

    <div class="auth-tabs">
      <button 
        class="tab-button" 
        [class.active]="isLoginMode" 
        (click)="toggleMode()">
        Login
      </button>
      <button 
        class="tab-button" 
        [class.active]="!isLoginMode" 
        (click)="toggleMode()">
        Register
      </button>
    </div>

    <form [formGroup]="isLoginMode ? loginForm : registerForm" (ngSubmit)="onSubmit()">
      <div class="form-group" *ngIf="!isLoginMode">
        <label for="name">Full Name</label>
        <input 
          type="text" 
          id="name" 
          formControlName="name" 
          placeholder="Enter your full name">
        <div class="error" *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched">
          Name is required
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email" 
          placeholder="Enter your email">
        <div class="error" *ngIf="(isLoginMode ? loginForm : registerForm).get('email')?.invalid && (isLoginMode ? loginForm : registerForm).get('email')?.touched">
          Please enter a valid email
        </div>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input 
          type="password" 
          id="password" 
          formControlName="password" 
          placeholder="Enter your password">
        <div class="error" *ngIf="(isLoginMode ? loginForm : registerForm).get('password')?.invalid && (isLoginMode ? loginForm : registerForm).get('password')?.touched">
          Password must be at least 6 characters
        </div>
      </div>

      <div class="form-group" *ngIf="!isLoginMode">
        <label for="role">Role</label>
        <select id="role" formControlName="role" (change)="onRoleChange()">
          <option value="passenger">Passenger</option>
          <option value="staff">Staff</option>
        </select>
      </div>

      <div class="form-group" *ngIf="!isLoginMode && registerForm.get('role')?.value === 'staff'">
        <label for="department">Department</label>
        <select id="department" formControlName="department">
          <option value="">Select Department</option>
          <option value="cabin_crew">Cabin Crew</option>
          <option value="sanitation">Sanitation</option>
          <option value="security">Security</option>
          <option value="maintenance">Maintenance</option>
        </select>
        <div class="error" *ngIf="registerForm.get('department')?.invalid && registerForm.get('department')?.touched">
          Department is required for staff
        </div>
      </div>

      <div class="form-group" *ngIf="!isLoginMode">
        <label for="phone">Phone (Optional)</label>
        <input 
          type="tel" 
          id="phone" 
          formControlName="phone" 
          placeholder="Enter your phone number">
      </div>

      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <button 
        type="submit" 
        class="btn btn-primary submit-btn"
        [disabled]="(isLoginMode ? loginForm : registerForm).invalid || isLoading">
        <span *ngIf="isLoading">Loading...</span>
        <span *ngIf="!isLoading">{{ isLoginMode ? 'Login' : 'Register' }}</span>
      </button>
    </form>

    <div class="auth-footer">
      <a href="/sos-portal" class="sos-link">üö® Emergency SOS Portal</a>
    </div>
  </div>
</div>
